{% extends "base.html" %}

{% block title %}Academic Portal - Course Documentation{% endblock %}

{% block content %}
<!-- Hero Section -->
<div class="hero-section py-5 position-relative overflow-hidden">
    <div class="container position-relative z-1">
        <div class="row align-items-center">
            <div class="col-lg-7">
                <h1 class="display-5 fw-bold mb-3">Academic Excellence Through Knowledge Sharing</h1>
                <p class="lead mb-4">Access comprehensive course materials, research documents, and educational resources designed to support your academic journey.</p>
                <div class="d-flex flex-wrap gap-3">
                    <a href="#courses" class="btn btn-light btn-lg px-4 py-2">
                        <i class="bi bi-book me-2"></i>Explore Courses
                    </a>
                    <a href="{{ url_for('main.search') }}" class="btn btn-outline-light btn-lg px-4 py-2">
                        <i class="bi bi-search me-2"></i>Search Documents
                    </a>
                </div>
            </div>
            <div class="col-lg-5 d-none d-lg-block text-center">
                <div class="p-4 position-relative">
                    <div class="hero-icon-container">
                        <i class="bi bi-mortarboard-fill text-white opacity-25" style="font-size: 8rem;"></i>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Decorative Elements -->
    <div class="hero-decoration-circle position-absolute top-0 end-0 translate-middle-y rounded-circle opacity-10" 
         style="width: 200px; height: 200px; background: var(--primary-600);"></div>
    <div class="hero-decoration-circle position-absolute bottom-0 start-0 translate-middle rounded-circle opacity-10" 
         style="width: 150px; height: 150px; background: var(--primary-600);"></div>
</div>

<!-- Stats Section -->
<div class="container mb-5">
    <div class="row g-4">
        <div class="col-md-4">
            <div class="card border-0 shadow-sm h-100 stats-card">
                <div class="card-body text-center py-4">
                    <div class="stats-icon bg-primary bg-opacity-10 rounded-circle d-inline-flex align-items-center justify-content-center mb-3 mx-auto" style="width: 70px; height: 70px;">
                        <i class="bi bi-collection text-primary fs-2"></i>
                    </div>
                    <div class="display-4 text-primary fw-bold">{{ courses|length }}</div>
                    <div class="fw-medium text-muted">Courses Available</div>
                </div>
            </div>
        </div>
        <div class="col-md-4">
            <div class="card border-0 shadow-sm h-100 stats-card">
                <div class="card-body text-center py-4">
                    {% set total_docs = namespace(value=0) %}
                    {% for course in courses %}
                        {% set total_docs.value = total_docs.value + course.docs_count %}
                    {% endfor %}
                    <div class="stats-icon bg-primary bg-opacity-10 rounded-circle d-inline-flex align-items-center justify-content-center mb-3 mx-auto" style="width: 70px; height: 70px;">
                        <i class="bi bi-file-earmark-text text-primary fs-2"></i>
                    </div>
                    <div class="display-4 text-primary fw-bold">{{ total_docs.value }}</div>
                    <div class="fw-medium text-muted">Documents</div>
                </div>
            </div>
        </div>
        <div class="col-md-4">
            <div class="card border-0 shadow-sm h-100 stats-card">
                <div class="card-body text-center py-4">
                    <div class="stats-icon bg-primary bg-opacity-10 rounded-circle d-inline-flex align-items-center justify-content-center mb-3 mx-auto" style="width: 70px; height: 70px;">
                        <i class="bi bi-clock-history text-primary fs-2"></i>
                    </div>
                    <div class="display-4 text-primary fw-bold">24/7</div>
                    <div class="fw-medium text-muted">Access Anytime</div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Courses Section -->
<div class="container" id="courses">
    <div class="row mb-4">
        <div class="col-12">
            <h2 class="text-center mb-2">Academic Courses</h2>
            <p class="text-center text-muted mb-4">Browse our collection of expertly curated course materials</p>
        </div>
    </div>
    
    {% if courses %}
        <div class="row g-4">
            {% for course in courses %}
            <div class="col-md-6 col-lg-4">
                <div class="card course-card h-100 border-0 shadow-sm overflow-hidden">
                    <!-- Course Header with Color Accent -->
                    <div class="position-relative">
                        <div class="card-header bg-primary bg-opacity-10 border-0 rounded-0" style="height: 8px;"></div>
                        <div class="card-body d-flex flex-column pt-4">
                            <div class="d-flex justify-content-between align-items-start mb-3">
                                <div class="icon-box bg-primary bg-opacity-10 rounded-3 d-flex align-items-center justify-content-center" style="width: 60px; height: 60px;">
                                    <i class="bi bi-journal-bookmark text-primary fs-4"></i>
                                </div>
                                {% if course.level %}
                                <span class="badge 
                                    {% if course.level.lower() == 'beginner' %}bg-success
                                    {% elif course.level.lower() == 'intermediate' %}bg-warning text-dark
                                    {% elif course.level.lower() == 'advanced' %}bg-danger
                                    {% else %}bg-primary{% endif %}">
                                    {{ course.level }}
                                </span>
                                {% endif %}
                            </div>
                            <h5 class="card-title">{{ course.title }}</h5>
                            <p class="card-text text-muted flex-grow-1">{{ course.description }}</p>
                            
                            <!-- Course Metadata -->
                            <div class="mt-auto pt-3">
                                <div class="d-flex justify-content-between text-muted small mb-2">
                                    <span><i class="bi bi-person-circle me-1"></i> {{ course.instructor }}</span>
                                </div>
                                <div class="d-flex justify-content-between align-items-center">
                                    <span class="text-muted small">
                                        <i class="bi bi-file-earmark-text me-1"></i> {{ course.docs_count }} documents
                                    </span>
                                    {% if course.duration %}
                                    <span class="text-muted small">
                                        <i class="bi bi-clock me-1"></i> {{ course.duration }}
                                    </span>
                                    {% endif %}
                                </div>
                                
                                <!-- Progress Bar (Functional Element) -->
                                <div class="mt-3">
                                    <!-- We'll calculate progress on the course page, but show a placeholder here -->
                                    <div class="d-flex justify-content-between small text-muted mb-1">
                                        <span>Your Progress</span>
                                        <span id="progress-text-{{ course.id }}">0/{{ course.docs_count }}</span>
                                    </div>
                                    <div class="progress" style="height: 8px;">
                                        <div class="progress-bar" 
                                             id="progress-bar-{{ course.id }}"
                                             role="progressbar" 
                                             style="width: 0%;" 
                                             aria-valuenow="0" 
                                             aria-valuemin="0" 
                                             aria-valuemax="{{ course.docs_count }}">
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <a href="{{ url_for('main.course', course_id=course.id) }}" class="btn btn-primary mt-3 w-100">
                                <i class="bi bi-arrow-right-circle me-2"></i>Access Course
                            </a>
                        </div>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
    {% else %}
        <div class="col-12">
            <div class="alert alert-info text-center py-5">
                <i class="bi bi-info-circle fs-1 mb-3"></i>
                <h4>No courses available</h4>
                <p class="mb-0">Please check back later for new course materials.</p>
            </div>
        </div>
    {% endif %}
</div>
{% endblock %}